webpackJsonp([1],{NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("7+uW"),a=s("NYxO"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var o=s("VU/8")({name:"App"},r,!1,function(e){s("zVsq")},null,null).exports,i=s("/ocq"),c=s("mtWM"),l=s.n(c),u=new i.a({mode:"history"});const g="id_token",d="access_token";function v(e){l.a.post("http://localhost:23200/authenticate",{loginCredentials:e}).then(function(e){return console.log(e.data),1==e.data.success?(s="user",localStorage.setItem(g,s),t=e.data.token,localStorage.setItem(d,t),e.data):(console.log("login creds was unsuccessful."),e.data);var t,s})}function m(){localStorage.removeItem(g),h(),u.go("/")}function p(){return localStorage.getItem(d)}function h(){localStorage.removeItem(d)}function f(){const e=localStorage.getItem(g),t=p();return"user"===e&&t}var _={name:"app-nav",methods:{isLoggedIn:function(){return f()},handleLogout:function(){return m()}}},w={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("nav",{staticClass:"navbar navbar-default"},[s("div",{staticClass:"navbar-header"},[s("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[e._v(" Nightlife Coord")]),e._v(" "),s("router-link",{staticClass:"navbar-brand",attrs:{to:"/basic"}},[e._v("Basic")]),e._v(" "),s("router-link",{directives:[{name:"show",rawName:"v-show",value:e.isLoggedIn(),expression:"isLoggedIn()"}],staticClass:"navbar-brand",attrs:{to:"/secret"}},[e._v("Secret")])],1),e._v(" "),s("ul",{staticClass:"nav navbar-nav navbar-right"},[s("li",[s("button",{directives:[{name:"show",rawName:"v-show",value:e.isLoggedIn(),expression:"isLoggedIn()"}],staticClass:"btn btn-danger log",on:{click:function(t){e.handleLogout()}}},[e._v("Log out ")]),e._v(" "),s("router-link",{directives:[{name:"show",rawName:"v-show",value:!e.isLoggedIn(),expression:"!isLoggedIn()"}],staticClass:"btn btn-info log",attrs:{to:"/login"}},[e._v("Login")])],1)])])},staticRenderFns:[]};var P=s("VU/8")(_,w,!1,function(e){s("mJN4")},"data-v-5496c0ee",null).exports;const b="http://localhost:23200";var C={name:"Places",components:{AppNav:P},data:function(){return{msg:"Nightlife Places",places:[]}},mounted:function(){console.log("in mounted()"),this.getPlaces()},methods:{isLoggedIn:function(){return f()},getPlaces:function(){var e=this;console.log("in getPlaces getting data"),function(){console.log("in getPlacesApi function of apis.js");const e=`${b}/api/places`;let t;return f()&&(t={headers:{Authorization:`Bearer ${p()}`}}),l.a.get(e,t).then(function(e){if(e.data.success)return!1===e.data.token&&h(),console.log(e.data),e.data.places})}().then(function(t){console.log("retrieved stuff"),console.log(t),e.places=t})},changeGoing:function(e){if(f()){for(var t=-1,s=0;s<this.places.length;s++)if(this.places[s].id===e){t=s;break}var n=!1;n=!this.places[t].going,function(e,t,s){console.log("in putAttendanceApi function of apis.js"),console.log(e),console.log(t),console.log(s);const n=`${b}/api/attendance`;var a={placeId:e,token:t,userAttendance:s},r={headers:{Authorization:`Bearer ${p()}`}};return l.a.put(n,a,r).then(e=>e.data)}(e,p(),n).then(function(e){console.log("putAttendanceApi result"),console.log(e)}),this.places[t].going?this.places[t].going=!1:this.places[t].going=!0}else""===this.searchString?this.$router.push({path:"Login"}):this.$router.push({path:"Login",query:{search:this.searchString}})}},computed:{searchString:{get:function(){return this.$store.getters.searchString},set:function(e){this.$store.commit("update",e)}},filteredPlaces:function(){var e=this;return this.places.filter(function(t){return t.name.toLowerCase().indexOf(e.searchString.toLowerCase())>=0})}}},S={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"hello"},[s("app-nav"),e._v(" "),s("h1",[e._v(e._s(e.msg))]),e._v(" "),s("hr"),e._v("\n\n  Seach Place Names: "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchString,expression:"searchString"}],attrs:{type:"text"},domProps:{value:e.searchString},on:{input:function(t){t.target.composing||(e.searchString=t.target.value)}}}),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:!e.isLoggedIn(),expression:"!isLoggedIn()"}]},[e._v("Log in to indicate where you are going.")]),e._v(" "),s("div",{staticClass:"holder"},e._l(e.filteredPlaces,function(t){return s("div",{key:t.id},[s("div",{},[s("h3",[e._v("\n          "+e._s(t.name)+"\n          "),e._v(" "),s("button",{on:{click:function(s){e.changeGoing(t.id)}}},[t.going?s("span",[e._v("Stop Going")]):s("span",[e._v("Going")])])]),e._v(" "),s("p",[e._v(e._s(t.description))]),e._v(" "),1==t.going?s("p",[e._v("You are going here")]):e._e()])])}))],1)},staticRenderFns:[]};var x=s("VU/8")(C,S,!1,function(e){s("pgzT")},"data-v-53dd18d6",null).exports,L={name:"loginPage",components:{AppNav:P},data:function(){return{active:"login",registerSubmit:"Register",passwordSubmit:"Reset Password",loginSubmit:"Login",registerUsername:"",registerPassword:"",registerPasswordConfirm:"",loginUsername:"",loginPassword:"",passwordEmail:"",registerError:"",loginError:"",passwordError:""}},methods:{isLoggedIn:function(){return f()},submit:function(e){"login"===e?v({username:this.loginUsername,password:this.loginPassword}):"register"===e&&this.registerPassword===this.registerPasswordConfirm&&function(e){l.a.post("http://localhost:23200/register",{registerCredentials:e}).then(function(e){return console.log(e.data),1==e.data.success?(console.log("Register successful."),e.data):(console.log("Register was unsuccessful."),resposne.data)})}({username:this.registerUsername,password:this.registerPassword}).then(function(e){this.registerError=e.message})},flip:function(e){e!==this.active&&(document.getElementById("form-"+this.active).classList.remove("active"),document.getElementById("form-"+e).classList.add("active"),document.getElementById(e+"-form").classList.add("active"),document.getElementById(this.active+"-form").classList.remove("active"),this.active=e)}}},I={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("app-nav"),e._v(" "),e.isLoggedIn()?s("div",{staticClass:"jumbotron text-center"},[s("h2",[e._v("You have already logged in.")])]):s("div",{staticClass:"col-sm-12"},[s("div",{staticClass:"jumbotron text-center"},[s("ul",{staticClass:"form-switcher"},[s("li",{on:{click:function(t){t.preventDefault(),e.flip("register")}}},[s("a",{attrs:{href:"",id:"register-form"}},[e._v("Register")])]),e._v(" "),s("li",{on:{click:function(t){t.preventDefault(),e.flip("login")}}},[s("a",{attrs:{href:"",id:"login-form"}},[e._v("Login")])])]),e._v(" "),s("div",{staticClass:"form-register",attrs:{id:"form-register"}},[s("h2",[e._v("Test")]),e._v(" "),s("div",{staticClass:"error-message",domProps:{textContent:e._s(e.registerError)}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.registerUsername,expression:"registerUsername"}],attrs:{type:"text",name:"username",placeholder:"Username"},domProps:{value:e.registerUsername},on:{input:function(t){t.target.composing||(e.registerUsername=t.target.value)}}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.registerPassword,expression:"registerPassword"}],attrs:{type:"password",name:"password",placeholder:"Password"},domProps:{value:e.registerPassword},on:{input:function(t){t.target.composing||(e.registerPassword=t.target.value)}}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.registerPasswordConfirm,expression:"registerPasswordConfirm"}],attrs:{type:"password",name:"passwordconfirm",placeholder:"Password Confirm"},domProps:{value:e.registerPasswordConfirm},on:{input:function(t){t.target.composing||(e.registerPasswordConfirm=t.target.value)}}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.registerSubmit,expression:"registerSubmit"}],attrs:{type:"submit",id:"registerSubmit"},domProps:{value:e.registerSubmit},on:{click:function(t){e.submit("register")},input:function(t){t.target.composing||(e.registerSubmit=t.target.value)}}}),e._v(" "),s("div",{staticClass:"links"},[s("a",{attrs:{href:""},on:{click:function(t){e.flip("login",t)}}},[e._v("Already have an account?")])])]),e._v(" "),s("div",{staticClass:"form-login active",attrs:{id:"form-login"}},[s("h2",[e._v("Test 2")]),e._v(" "),s("div",{staticClass:"error-message",domProps:{textContent:e._s(e.loginError)}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.loginUsername,expression:"loginUsername"}],attrs:{type:"text",name:"username",placeholder:"Username"},domProps:{value:e.loginUsername},on:{input:function(t){t.target.composing||(e.loginUsername=t.target.value)}}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.loginPassword,expression:"loginPassword"}],attrs:{type:"password",name:"password",placeholder:"Password"},domProps:{value:e.loginPassword},on:{input:function(t){t.target.composing||(e.loginPassword=t.target.value)}}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.loginSubmit,expression:"loginSubmit"}],attrs:{type:"submit",id:"loginSubmit"},domProps:{value:e.loginSubmit},on:{click:function(t){e.submit("login")},input:function(t){t.target.composing||(e.loginSubmit=t.target.value)}}}),e._v(" "),s("div",{staticClass:"links"},[s("a",{attrs:{href:""},on:{click:function(t){e.flip("password",t)}}},[e._v("Forgot your password?")])])]),e._v(" "),s("div",{staticClass:"form-password",attrs:{id:"form-password"}})])])],1)},staticRenderFns:[]};var N=s("VU/8")(L,I,!1,function(e){s("UavZ")},"data-v-49eb221e",null).exports,k={name:"SecretPage",components:{AppNav:P},methods:{isLoggedIn:function(){return f()}}},y={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("app-nav"),this._v(" "),t("h3",{staticClass:"text-center"},[this._v("Secret Page")]),this._v(" "),t("hr"),this._v(" "),t("div",{staticClass:"col-sm-12"},[t("div",{directives:[{name:"show",rawName:"v-show",value:this.isLoggedIn(),expression:"isLoggedIn()"}],staticClass:"jumbotron text-center"},[t("h2",[this._v("You are successfully authorised and logged in.")])])])],1)},staticRenderFns:[]};var U=s("VU/8")(k,y,!1,function(e){s("eXRq")},"data-v-27ff1a8e",null).exports,E={name:"BasicPage",components:{AppNav:P},methods:{}},A={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("app-nav"),this._v(" "),t("h3",{staticClass:"text-center"},[this._v("Basic Page")]),this._v(" "),t("hr"),this._v(" "),this._m(0)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col-sm-12"},[t("div",{staticClass:"jumbotron text-center"},[t("h2",[this._v("You are on basic page.")])])])}]};var $=s("VU/8")(E,A,!1,function(e){s("uFfh")},"data-v-6b592c56",null).exports;n.a.use(i.a);var R=new i.a({routes:[{path:"/",name:"Places",component:x},{path:"/login",name:"Login",component:N},{path:"/secret",name:"SecretPage",beforeEnter:function(e,t,s){f()?s():s({path:"/login",query:{redirect:e.fullPath}})},component:U},{path:"/basic",name:"Basic",component:$}]});n.a.use(a.a),n.a.config.productionTip=!1;var B=new a.a.Store({debug:!0,state:{searchString:""},getters:{searchString:function(e){return e.searchString}},mutations:{update:function(e,t){e.searchString=t}}});new n.a({el:"#app",router:R,components:{App:o},template:"<App/>",store:B})},UavZ:function(e,t){},eXRq:function(e,t){},mJN4:function(e,t){},pgzT:function(e,t){},uFfh:function(e,t){},zVsq:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.12aaba63e85bf209d9c1.js.map